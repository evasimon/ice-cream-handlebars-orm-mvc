 {{!-- * Setup the `index.handlebars` to have the template that Handlebars can render onto. --}} {{!-- * Create a button
in `index.handlebars` that will submit the user input into the database. --}}

<h1>Eat a Ice Cream</h1>

<form action="/" method="POST">
    <textarea type="text" name="ice_cream"></textarea>

    <button type="submit">Add Ice Cream</button>
</form>

<h3>Eat your favorite ice cream</h3>

<ul>
    {{#each ice_cream}}
    <li>
        <p>
            {{this.id}}. {{this.ice_cream_name}}
            <button data-ice_cream_id="{{this.id}}" class="devour_ice_cream">Devour!</button>
        </p>
    </li>
    {{/each}}
</ul>
<h3>Devoured Ice Cream</h3>

<ul>
    {{#each ice_cream_eaten}}
    <li>
        <p>
            {{this.id}}. {{this.ice_cream_name}}
        </p>
    </li>
    {{/each}}
</ul>

<script>
    $('.devour_ice_cream').on('click', function () {
        var id = $(this).data('ice_cream_id');

        $.ajax('/' + id, {
            type: 'PUT'
        }).then(
            function () {
                console.log("updated id ", id);
                // Reload the page to get the updated list
                location.reload();
            }
            )
    })
</script>